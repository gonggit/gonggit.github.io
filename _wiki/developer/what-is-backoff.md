---
layout  : wiki
title   : backoff ì„¤ì • í•œ ë²ˆ ë´ ì£¼ì„¸ìš”. 
summary : ì–¼ë§ˆë§Œí¼ë”ê¸°ë‹¤ë¦¬ëŠ”ê±°ì—ìš”? 
date    : 2025-03-26 00:14:42 +0900
updated : 2025-03-26 00:35:58 +0900
tag     : 
resource: D8/DEF49B-56C0-4443-9DDE-54205861E9EC
toc     : true
public  : true
parent  : [[/developer]]
latex   : false
---
* TOC
{:toc}

# Backoff?
ì²˜ìŒ Backoffë¥¼ ì ‘í•˜ëŠ” ê²ƒì€ ë³´í†µ ë°ì´í„°í†µì‹  ê°™ì€ ì „ê³µìˆ˜ì—… ë•Œì¼ ê²ƒì´ë‹¤. ì „ì†¡ì œì–´ ë“±ì„ ë°°ìš¸ ë•Œ ì‹¤íŒ¨í•œ ì „ì†¡ì„ ì–´ë–»ê²Œ ì¬ì²˜ë¦¬ í•  ê²ƒì¸ê°€ ë“±ì˜ ë‚´ìš©ì— ë“±ì¥í•˜ëŠ” ê²ƒì´ ë°”ë¡œ ì´ backoff ì´ë‹¤.

ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ì—ì„œ **Backoff**ëŠ” **ì¬ì‹œë„(retry) ì „ëµ**ì˜ ì¼í™˜ìœ¼ë¡œ, ì‹¤íŒ¨í•œ ìš”ì²­ì„ ì¼ì • ì‹œê°„ ëŒ€ê¸° í›„ ë‹¤ì‹œ ì‹œë„í•˜ëŠ” ë°©ì‹ì´ë‹¤.  

**ê³¼ë¶€í•˜ ë°©ì§€, ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„± ê°œì„ , íŠ¸ë˜í”½ ê¸‰ì¦ ì™„í™”** ë“±ì˜ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°, **Kafka, RabbitMQ, Redis** ê°™ì€ ë©”ì‹œì§• ì‹œìŠ¤í…œ ë° ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œë„ í™œìš©ëœë‹¤.

ê·¸ëŸ¬ë‹ˆê¹Œ ëŒ€ìƒì´ ì—°ê²°ì„ ë°›ì•„ì¤„ ìˆ˜ ì—†ëŠ” ì¥ì•  ìƒí™©ì— ë¬´ì‘ì • ê³„ì†í•´ì„œ ì—°ê²°ì„ ì‹œë„í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ”, ì¼ì • ì£¼ê¸° í˜¹ì€ ì¦ê°€í•˜ëŠ” ì£¼ê¸°ë¡œ ì‹œë„í•˜ì—¬ ì—°ê²°ì„ ì‹œë„ í˜¹ì€ ë°›ì•„ì£¼ëŠ” ì–‘ìª½ ëª¨ë‘ì˜ ë¶€í•˜ë¥¼ ì¤„ì—¬ì£¼ëŠ” ë°©ë²•ì¸ ê²ƒì´ë‹¤.

---

## ğŸ“Œ Backoff ìœ í˜•

### 1. Fixed Backoff (ê³ ì •ëœ ëŒ€ê¸°ì‹œê°„)
- ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ ì¬ì‹œë„.
- ì˜ˆ: `100ms â†’ 100ms â†’ 100ms`

### 2. Linear Backoff (ì„ í˜• ì¦ê°€)
- ì¬ì‹œë„í•  ë•Œë§ˆë‹¤ ëŒ€ê¸°ì‹œê°„ì´ ì¼ì •í•œ ê°’ë§Œí¼ ì¦ê°€.
- ì˜ˆ: `100ms â†’ 200ms â†’ 300ms â†’ 400ms`

### 3. Exponential Backoff (ì§€ìˆ˜í˜• ì¦ê°€)
- ëŒ€ê¸°ì‹œê°„ì´ `2^n` ë˜ëŠ” `base^n` í˜•íƒœë¡œ ì¦ê°€.
- ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì´ ê¸‰ì¦í–ˆì„ ë•Œ ì„œë²„ ë³´í˜¸ë¥¼ ìœ„í•´ ì‚¬ìš©ë¨.
- ì˜ˆ: `100ms â†’ 200ms â†’ 400ms â†’ 800ms`

### 4. Exponential Backoff with Jitter (ì§€í„° í¬í•¨)
- ì§€ìˆ˜í˜• ì¦ê°€ ë°©ì‹ì— ë‚œìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ **ë¶€í•˜ ì§‘ì¤‘ì„ ë°©ì§€**.
- ì˜ˆ: `100ms â†’ 210ms â†’ 430ms â†’ 870ms (ëœë¤ ê°’ í¬í•¨)`

---

## ğŸ“Œ ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

### âœ… Kafka Backoff ì„¤ì •
Kafkaì—ì„œëŠ” ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„(backoff)ë¥¼ ìœ„í•´ `retry.backoff.ms`, `reconnect.backoff.ms` ê°™ì€ ì„¤ì •ì„ ì‚¬ìš©í•œë‹¤.

```properties
# Producerì—ì„œ ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ê°„ê²© (ê¸°ë³¸ê°’: 100ms)
retry.backoff.ms=200

# Brokerì™€ì˜ ì¬ì—°ê²° ì‹œë„ ê°„ê²© (ê¸°ë³¸ê°’: 50ms)
reconnect.backoff.ms=300
```
ì°¸ê³  : retry.backoff.ms[^id], reconnect.backoff.ms[^id2]


## ğŸ“Œ ê²°ë¡ 

BackoffëŠ” ë¶„ì‚° ì‹œìŠ¤í…œ ë° ë©”ì‹œì§€ ë¸Œë¡œì»¤ì—ì„œ ì¬ì‹œë„ ìš”ì²­ì„ ì œì–´í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±ê³¼ ì„±ëŠ¥ì„ ë³´ì¥í•˜ëŠ” ì¤‘ìš”í•œ ì „ëµì´ë©°, ì—¬ëŸ¬ ì‹œìŠ¤í…œì—ì„œë„ ì´ë¥¼ í™œìš©í•˜ì—¬ ê³¼ë¶€í•˜ë¥¼ ë°©ì§€í•˜ê³  ì•ˆì •ì ì¸ ì—°ê²°ì„ ìœ ì§€í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ì‹¤ë¬´ì—ì„œ ì œë°˜ ì¸í”„ë¼(ì¹´í”„ì¹´ ë“±)ì™€ ì»¤ë„¥ì…˜ ì—ëŸ¬ê°€ ê³„ì†í•´ì„œ ë°œìƒí•  ë•Œ ìì‹ ê° ìˆê²Œ ë§í•˜ì. 

> ì´ê±° backoff ì–´ë–»ê²Œ ì„¤ì •ë˜ì–´ ìˆì–´ìš”? ë‹¤ìŒ ì‹œë„ê¹Œì§€ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦¬ë©´ ê·¸ëƒ¥ ì¬ë°°í¬ í•˜ì‹œì£ !

## ì°¸ê³ 
[^id]: [retry.backoff.ms ì„¤ì •](https://docs.confluent.io/platform/current/installation/configuration/producer-configs.html#retry-backoff-ms){:target="_blank"}
[^id2]: [reconnect.backoff.ms ì„¤ì •](https://docs.confluent.io/platform/current/installation/configuration/producer-configs.html#reconnect-backoff-ms){:target="_blank"}

